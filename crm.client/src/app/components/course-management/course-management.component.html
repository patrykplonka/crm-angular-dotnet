<div class="course-management-container">
  <app-sidebar></app-sidebar>
  <div class="content">
    <h2>Zarządzanie kursami</h2>

    <button *ngIf="isAdmin" class="btn toggle-form" (click)="toggleForm()">
      {{ showForm ? 'Ukryj formularz' : 'Dodaj nowy kurs' }}
    </button>

    <div class="add-course-form" *ngIf="showForm && isAdmin">
      <h3>Dodaj nowy kurs</h3>
      <form (ngSubmit)="addCourse()">
        <div class="form-group">
          <label for="title">Tytuł</label>
          <input type="text" id="title" [(ngModel)]="newCourse.title" name="title" required />
        </div>
        <div class="form-group">
          <label for="description">Opis</label>
          <textarea id="description" [(ngModel)]="newCourse.description" name="description" required></textarea>
        </div>
        <div class="form-group">
          <label for="instructor">Instruktor</label>
          <input type="text" id="instructor" [(ngModel)]="newCourse.instructor" name="instructor" />
        </div>
        <div class="form-group">
          <label for="durationHours">Czas trwania (godziny)</label>
          <input type="number" id="durationHours" [(ngModel)]="newCourse.durationHours" name="durationHours" required />
        </div>
        <button type="submit" class="btn">Dodaj kurs</button>
      </form>
    </div>

    <h3>Lista kursów</h3>
    <div *ngIf="courses.length === 0">Brak kursów do wyświetlenia</div>
    <div class="course-list">
      <div class="course-card" *ngFor="let course of courses">
        <h4>{{ course.title }}</h4>
        <p>{{ course.description }}</p>
        <p>Instruktor: {{ course.instructor }}</p>
        <p>Czas trwania: {{ course.durationHours }}h</p>
        <button class="btn enroll-btn" (click)="toggleEnrollment(course)">
          {{ course.enrolled ? 'Wypisz się' : 'Zapisz się' }}
        </button>
        <button *ngIf="isAdmin" class="btn delete-btn" (click)="deleteCourse(course.id)">Usuń</button>
      </div>
    </div>
  </div>
</div>
